parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"GfMM":[function(require,module,exports) {
"use strict";var t=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var o=function t(e,n){r(this,t),this.width=e,this.height=n};exports.Dimensions2=o;var i=function(){function e(t,n){r(this,e),this.x=t,this.y=n}return t(e,[{key:"add",value:function(t){return new e(this.x+t.x,this.y+t.y)}},{key:"addTwo",value:function(t,n){return new e(this.x+t,this.y+n)}},{key:"reverse",value:function(){return new e(-this.x,-this.y)}},{key:"magnitude",value:function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}},{key:"angle",value:function(){return Math.atan2(this.y,this.x)-u(-90)}},{key:"rotateBy",value:function(t){var n=Math.atan2(this.x,this.y)+t,r=this.magnitude();return new e(r*Math.sin(n),r*Math.cos(n))}}]),e}();exports.Vector2=i;var a=function(t){function o(t){return r(this,o),e(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,Math.sin(t),-Math.cos(t)))}return n(o,i),o}();function u(t){return t/360*2*Math.PI}function s(t){return 360*t/(2*Math.PI)}function c(t,e){for(var n=[],r=e/t,o=e/2,i=0;i<t;i++){var u=o-i*r;n.push(new a(u))}return n}exports.Vector2Normalised=a,exports.degreesToRadians=u,exports.radiansToDegress=s,exports.getFanSpreadVectors=c;
},{}],"8Aiq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GAME_SPEED=50,exports.VERY_SLOW_MOVEMENT_SPEED=1,exports.SLOW_MOVEMENT_SPEED=2,exports.MEDIUM_MOVEMENT_SPEED=4,exports.FAST_MOVEMENT_SPEED=6,exports.VERY_FAST_MOVEMENT_SPEED=12,exports.MEDIUM_FONT_SIZE=14,exports.LARGE_FONT_SIZE=20;
},{}],"AxgJ":[function(require,module,exports) {
"use strict";var t=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var o=require("../SpaceInvaders"),r=require("../util/Vectors"),s=require("../constants/GameSettings"),c=function(){function e(t,i){n(this,e),this.position=t,this.active=!0,this.directionVector=i}return t(e,[{key:"inBounds",value:function(){return this.position.x>=0&&this.position.x-this.dimensions.width<=o.SpaceInvaders.CANVAS_WIDTH&&this.position.y>=0&&this.position.y-this.dimensions.height<=o.SpaceInvaders.CANVAS_HEIGHT}}]),e}();c.SMALL_SIZE=3,c.LARGE_SIZE=9,exports.Bullet=c;var u=function(o){function u(t,i){n(this,u);var o=e(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,t,i));return o.position=t,o.dimensions=new r.Dimensions2(c.SMALL_SIZE,c.SMALL_SIZE),o.color="white",o.damageInflicted=1,o}return i(u,c),t(u,[{key:"draw",value:function(t){t.fillStyle=this.color,t.fillRect(this.position.x,this.position.y,this.dimensions.width,this.dimensions.height)}},{key:"update",value:function(t){this.position.x+=this.directionVector.x*t*s.MEDIUM_MOVEMENT_SPEED,this.position.y+=this.directionVector.y*t*s.MEDIUM_MOVEMENT_SPEED,this.active=this.active&&this.inBounds()}}]),u}();exports.BasicBullet=u;
},{"../SpaceInvaders":"HxjF","../util/Vectors":"GfMM","../constants/GameSettings":"8Aiq"}],"18k3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.INITIALISING="INITIALISING",exports.GAME_OVER="GAME_OVER",exports.BATTLE_MODE="BATTLE_MODE",exports.YOU_WIN="YOU_WIN";
},{}],"/478":[function(require,module,exports) {
module.exports="/youtube-space-invaders/player.e4f3c311.svg";
},{}],"9zSA":[function(require,module,exports) {
"use strict";var e=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var i=require("../util/Vectors"),n=require("./Bullets"),o=require("../constants/GameSettings"),r=require("../constants/GameStates"),s=require("../SpaceInvaders"),a=function(){function a(e){t(this,a),this.color="#0FF",this.dimensions=new i.Dimensions2(a.DEFAULT_WIDTH,a.DEFAULT_HEIGHT),this.health=3,this.lastShotTime=0,this.fireRatePerSec=4,this.directionVector=new i.Vector2(0,0),this.position=e}return e(a,[{key:"draw",value:function(e){e.drawImage(c,this.position.x,this.position.y)}},{key:"update",value:function(e){this.position.x+=this.directionVector.x*e*o.MEDIUM_MOVEMENT_SPEED,this.position.y+=this.directionVector.y*e*o.MEDIUM_MOVEMENT_SPEED}},{key:"midpoint",value:function(){return new i.Vector2(this.position.x+this.dimensions.width/2,this.position.y+this.dimensions.height/2)}},{key:"explode",value:function(){s.SpaceInvaders.gameState=r.GAME_OVER;document.createElement("audio")}},{key:"shootAhead",value:function(){return(new Date).getTime()-this.lastShotTime>1e3/this.fireRatePerSec?(this.lastShotTime=(new Date).getTime(),new n.BasicBullet(this.midpoint(),new i.Vector2Normalised(0))):null}},{key:"updateDirection",value:function(e){this.directionVector=e}},{key:"remainStationary",value:function(){this.directionVector.x=0,this.directionVector.y=0}},{key:"takeDamage",value:function(e){this.health-=e.damageInflicted,this.health<=0&&this.explode()}}]),a}();a.DEFAULT_HEIGHT=30,a.DEFAULT_WIDTH=60,exports.Player=a;var c=new Image;c.src=require("../images/player.svg");
},{"../util/Vectors":"GfMM","./Bullets":"AxgJ","../constants/GameSettings":"8Aiq","../constants/GameStates":"18k3","../SpaceInvaders":"HxjF","../images/player.svg":"/478"}],"oFXw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.KEY_CODES={RETURN:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,ZERO:48,ONE:49,TWO:50};
},{}],"c733":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./Vectors");function t(t,r,a,o,s,n,d){var i=e.degreesToRadians(a);t.translate(o,s),t.rotate(i),t.drawImage(r,-n,-d),t.rotate(-i),t.translate(-o,-s)}exports.rotateAndPaintImage=t;
},{"./Vectors":"GfMM"}],"UEFV":[function(require,module,exports) {
"use strict";var e=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var i=require("../util/Vectors"),n=require("./Bullets"),o=require("../constants/GameSettings"),s=require("../SpaceInvaders"),r=require("../util/Canvas2D_tools"),a=function(){function a(e){t(this,a),this.position=e,this.health=1,this.dimensions=new i.Dimensions2(a.DEFAULT_WIDTH,a.DEFAULT_HEIGHT),this.active=!0,this.probabilityOfShooting=5e-4,this.rotationInDegrees=180,this.image=new Image,this.directionVector=new i.Vector2(0,0),this.facingAngleRad=Math.PI}return e(a,[{key:"draw",value:function(e){r.rotateAndPaintImage(e,this.image,180,this.position.x,this.position.y,this.dimensions.width,this.dimensions.height)}},{key:"midpoint",value:function(){return new i.Vector2(this.position.x+this.dimensions.width/2,this.position.y+this.dimensions.height/2)}},{key:"explode",value:function(){this.active=!1,s.SpaceInvaders.score+=this.pointsValue}},{key:"reverse",value:function(){this.directionVector.x=-this.directionVector.x,this.directionVector.y=-this.directionVector.y}},{key:"updateDirection",value:function(e){this.directionVector=e}},{key:"update",value:function(e){this.position.x+=this.directionVector.x*e*o.VERY_SLOW_MOVEMENT_SPEED}},{key:"shootAhead",value:function(){return[new n.BasicBullet(this.midpoint(),new i.Vector2(0,1))]}},{key:"takeHit",value:function(e){this.health-=e.damageInflicted,this.health<=0&&this.explode()}}]),a}();a.DEFAULT_HEIGHT=20,a.DEFAULT_WIDTH=30,exports.AbstractInvader=a;
},{"../util/Vectors":"GfMM","./Bullets":"AxgJ","../constants/GameSettings":"8Aiq","../SpaceInvaders":"HxjF","../util/Canvas2D_tools":"c733"}],"R5Zg":[function(require,module,exports) {
"use strict";function e(e){return e/360*2*Math.PI}function r(e){return 360*e/(2*Math.PI)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.degreesToRadians=e,exports.radiansToDegress=r;
},{}],"2FTI":[function(require,module,exports) {
module.exports="/youtube-space-invaders/lightInvader.420524de.svg";
},{}],"0sZ3":[function(require,module,exports) {
module.exports="/youtube-space-invaders/MediumInvader.622c012f.svg";
},{}],"RIp2":[function(require,module,exports) {
module.exports="/youtube-space-invaders/HeavyInvader.0f83eabb.svg";
},{}],"M9J/":[function(require,module,exports) {
"use strict";var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var o=require("../util/Vectors"),i=require("./Bullets"),a=require("./AbstractInvader"),u=require("../util/Conversions"),s=function(e){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new o.Vector2(0,0);t(this,i);var n=r(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return n.probabilityOfShooting=.001,n.health=1,n.pointsValue=10,n.image.src=require("../images/lightInvader.svg"),n}return n(i,a.AbstractInvader),i}();exports.LightInvader=s;var c=function(e){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new o.Vector2(0,0);t(this,i);var n=r(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return n.probabilityOfShooting=.002,n.health=3,n.pointsValue=30,n.image.src=require("../images/MediumInvader.svg"),n}return n(i,a.AbstractInvader),i}();exports.MediumInvader=c;var l=function(s){function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new o.Vector2(0,0);t(this,c);var n=r(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));return n.probabilityOfShooting=.004,n.pointsValue=60,n.health=5,n.image.src=require("../images/HeavyInvader.svg"),n}return n(c,a.AbstractInvader),e(c,[{key:"shootAhead",value:function(){var e=this,t=Math.random();if(t>=0&&t<=.75)return[new i.BasicBullet(this.midpoint(),new o.Vector2Normalised(0))];var r=o.getFanSpreadVectors(10,u.degreesToRadians(45)),n=[];return r.forEach(function(t){var r=new i.BasicBullet(e.midpoint(),new o.Vector2Normalised(e.facingAngleRad+t.angle()));n.push(r)}),n}}]),c}();exports.HeavyInvader=l;
},{"../util/Vectors":"GfMM","./Bullets":"AxgJ","./AbstractInvader":"UEFV","../util/Conversions":"R5Zg","../images/lightInvader.svg":"2FTI","../images/MediumInvader.svg":"0sZ3","../images/HeavyInvader.svg":"RIp2"}],"LWCP":[function(require,module,exports) {
"use strict";function e(e){return e>0&&Math.sqrt(e)%1==0}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isSquare=e;
},{}],"pIQi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./MathChecks"),r=require("./Vectors");function i(i,t,n){if(!e.isSquare(i.length))throw new Error("needs perfect square number of units");for(var o=Math.sqrt(i.length),s=new r.Vector2(0,0),h=0,a=o;a>=1;a--){for(var d=2*a-1,w=0,u=0;u<d;u++){var c=i[h+u];c.dimensions.height>w&&(w=c.dimensions.height),c.position=new r.Vector2(u*(c.dimensions.width+t)+s.x,s.y)}s=s.addTwo(i[h].dimensions.width+t,w+n),h+=d}}function t(e,i,t,n){var o=e.length/i;if(o%1!=0)throw new Error("number / itemsPerRow must fit");for(var s=new r.Vector2(0,0),h=0,a=0;a<o;a++){for(var d=0,w=0;w<i;w++){var u=e[h+w];u.dimensions.height>d&&(d=u.dimensions.height),u.position=new r.Vector2(w*(u.dimensions.width+t)+s.x,s.y)}s=s.addTwo(0,d+n),h+=i}}exports.triangle=i,exports.rectangle=t;
},{"./MathChecks":"LWCP","./Vectors":"GfMM"}],"uANU":[function(require,module,exports) {
"use strict";var e=function(){function e(e,n){for(var r=0;r<n.length;r++){var a=n[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,r,a){return r&&e(n.prototype,r),a&&e(n,a),n}}();function n(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../gameObjects/Invaders"),a=require("../util/Vectors"),t=require("../util/Formations"),i=function(){function i(){n(this,i),this.waves=[],this.currentWave=0,this.generateWaves()}return e(i,[{key:"getNextWave",value:function(){var e=this.waves[this.currentWave];return e?(this.currentWave++,e()):null}},{key:"generateWaves",value:function(){this.waves.push(function(){var e=[new r.LightInvader,new r.LightInvader,new r.LightInvader,new r.LightInvader,new r.LightInvader,new r.LightInvader,new r.LightInvader,new r.LightInvader];return e.forEach(function(e){e.updateDirection(new a.Vector2Normalised(90))}),t.rectangle(e,4,15,20),e}),this.waves.push(function(){var e=[new r.LightInvader,new r.LightInvader,new r.LightInvader,new r.MediumInvader,new r.MediumInvader,new r.LightInvader,new r.LightInvader,new r.LightInvader,new r.LightInvader,new r.LightInvader,new r.LightInvader,new r.LightInvader,new r.LightInvader,new r.LightInvader,new r.LightInvader,new r.LightInvader];return e.forEach(function(e){e.updateDirection(new a.Vector2Normalised(90))}),t.rectangle(e,8,15,20),e}),this.waves.push(function(){var e=[new r.LightInvader,new r.MediumInvader,new r.HeavyInvader,new r.MediumInvader,new r.LightInvader,new r.MediumInvader,new r.MediumInvader,new r.MediumInvader,new r.LightInvader];return e.forEach(function(e){e.updateDirection(new a.Vector2Normalised(90))}),t.triangle(e,15,20),e}),this.waves.push(function(){var e=[new r.LightInvader,new r.MediumInvader,new r.HeavyInvader,new r.HeavyInvader,new r.HeavyInvader,new r.MediumInvader,new r.LightInvader,new r.LightInvader,new r.MediumInvader,new r.HeavyInvader,new r.MediumInvader,new r.LightInvader,new r.LightInvader,new r.MediumInvader,new r.LightInvader,new r.LightInvader];return e.forEach(function(e){e.updateDirection(new a.Vector2Normalised(90))}),t.triangle(e,15,20),e})}}]),i}();exports.WaveManager=i;
},{"../gameObjects/Invaders":"M9J/","../util/Vectors":"GfMM","../util/Formations":"pIQi"}],"MaKY":[function(require,module,exports) {
"use strict";function i(i,o){return i.position.x<o.position.x+o.dimensions.width&&i.position.x+i.dimensions.width>o.position.x&&i.position.y<o.position.y+o.dimensions.height&&i.position.y+i.dimensions.height>o.position.y}Object.defineProperty(exports,"__esModule",{value:!0}),exports.rectCollides=i;
},{}],"bV9m":[function(require,module,exports) {
"use strict";var e=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var i=require("../util/Vectors"),n=function(){function n(e){t(this,n),this.dimensions=new i.Dimensions2(n.DEFAULT_SIZE,n.DEFAULT_SIZE),this.color="#0F9",this.active=!0,this.position=e}return e(n,[{key:"draw",value:function(e){e.fillStyle=this.color,this.active&&e.fillRect(this.position.x,this.position.y,this.dimensions.width,this.dimensions.height)}},{key:"update",value:function(e){}},{key:"explode",value:function(){this.active=!1}}]),n}();n.DEFAULT_SIZE=5,exports.DestructibleScenery=n;var o=function(){function o(e){t(this,o),this.requestedDimensions=e,this.allDestructibleScenery=[];var r=Math.floor(e.x/n.DEFAULT_SIZE),s=Math.floor(e.y/n.DEFAULT_SIZE);this.actualDimensions=new i.Vector2(r*n.DEFAULT_SIZE,s*n.DEFAULT_SIZE);for(var a=void 0,c=0;c<r;c++){a=new i.Vector2(n.DEFAULT_SIZE*c,0);for(var u=0;u<s;u++)a=a.addTwo(0,n.DEFAULT_SIZE),this.allDestructibleScenery.push(new n(a))}}return e(o,[{key:"draw",value:function(e){this.allDestructibleScenery.forEach(function(t){t.draw(e)})}},{key:"transform",value:function(e){this.allDestructibleScenery.forEach(function(t){t.position=t.position.add(e)})}}]),o}();exports.PlayerBase=o;
},{"../util/Vectors":"GfMM"}],"87MY":[function(require,module,exports) {
module.exports="/youtube-space-invaders/sunrise.c58b58e2.jpg";
},{}],"HxjF":[function(require,module,exports) {
"use strict";var e=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}();function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var i=require("./gameObjects/Player"),a=require("./util/Vectors"),s=require("./constants/Keycodes"),n=require("./constants/GameSettings"),r=require("./constants/GameStates"),o=require("./story/WaveManager"),l=require("./util/CollisionDetection"),c=require("./util/Conversions"),u=require("./gameObjects/PlayerBase"),h=function(){function h(e){for(var i in t(this,h),this.waveManager=new o.WaveManager,this.playerOffsetHeight=20,this.playerBullets=[],this.bases=[],this.invaderBullets=[],this.background=new Image,this.spaceColor="black",this.keyStatus={},this.lastFrame=(new Date).getTime(),this.canvas=e,(new Date).getTime(),this.context2D=this.canvas.getContext("2d"),this.canvas.width=h.CANVAS_WIDTH,this.canvas.height=this.canvas.width/h.ASPECT_RATIO,this.background.src=require("./images/backgrounds/sunrise.jpg"),s.KEY_CODES)this.keyStatus[s.KEY_CODES[i]]=!1;this.initGame()}return e(h,[{key:"update",value:function(){var e=(new Date).getTime(),t=(e-this.lastFrame)/1e3*n.GAME_SPEED;switch(this.drawBackground(),h.gameState){case r.INITIALISING:return void this.drawInit();case r.YOU_WIN:return void this.drawYouWin();case r.GAME_OVER:return void this.drawGameOver()}this.updatePlayer(t),this.updateEnemies(t),this.updateBullets(t),this.updateBases(),this.handleCollisions(),0!==this.invaders.length||(this.invaders=this.waveManager.getNextWave(),this.invaders)?(this.drawBattleScene(),this.lastFrame=e):h.gameState=r.YOU_WIN}},{key:"createBases",value:function(e,t){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:40,s=0;s<e;s++)this.bases.push(new u.PlayerBase(t));for(var n=(h.CANVAS_WIDTH-2*i-e*this.bases[0].actualDimensions.x)/(e-1),r=0;r<e;r++){var o=new a.Vector2(r*(this.bases[0].actualDimensions.x+n)+i,500);this.bases[r].transform(o)}}},{key:"drawInit",value:function(){this.context2D.fillStyle="#0FF",this.context2D.font=n.LARGE_FONT_SIZE+"px Verdana",this.context2D.fillText("Loading..",5,25),h.gameState=r.BATTLE_MODE}},{key:"drawGameOver",value:function(){this.context2D.fillStyle="#F00",this.context2D.font=n.LARGE_FONT_SIZE+"px Verdana",this.context2D.fillText("SpaceInvaders over!",5,25)}},{key:"drawYouWin",value:function(){this.context2D.fillStyle="#FF0",this.context2D.font=n.LARGE_FONT_SIZE+"px Verdana",this.context2D.fillText("YOU win!",5,25)}},{key:"onKeyDown",value:function(e){this.keyStatus[e.keyCode]=!0}},{key:"onKeyUp",value:function(e){this.keyStatus[e.keyCode]=!1}},{key:"initGame",value:function(){this.player=new i.Player(new a.Vector2(h.CANVAS_WIDTH/2,this.canvas.height-this.playerOffsetHeight-i.Player.DEFAULT_HEIGHT)),this.invaders=this.waveManager.getNextWave(),this.createBases(3,new a.Vector2(100,30))}},{key:"updateBases",value:function(){this.bases.forEach(function(e){e.allDestructibleScenery=e.allDestructibleScenery.filter(function(e){return e.active})})}},{key:"drawBackground",value:function(){this.context2D.fillStyle=this.spaceColor,this.context2D.fillRect(0,0,h.CANVAS_WIDTH,h.CANVAS_HEIGHT),this.context2D.drawImage(this.background,-200,0)}},{key:"drawScore",value:function(){this.context2D.fillStyle="#0FF",this.context2D.font=n.MEDIUM_FONT_SIZE+"px Verdana",this.context2D.fillText("Score: "+h.score,2,14),this.context2D.fillText("Health: "+this.player.health,2,h.CANVAS_HEIGHT-6)}},{key:"drawBattleScene",value:function(){this.drawScore();var e=this;this.invaders.forEach(function(t){t.draw(e.context2D)}),this.playerBullets.forEach(function(t){t.draw(e.context2D)}),this.invaderBullets.forEach(function(t){t.draw(e.context2D)}),this.bases.forEach(function(t){t.draw(e.context2D)}),this.player.draw(this.context2D)}},{key:"updatePlayer",value:function(e){if(this.keyStatus[s.KEY_CODES.LEFT]?this.keyStatus[s.KEY_CODES.UP]?this.player.updateDirection(new a.Vector2Normalised(c.degreesToRadians(305))):this.keyStatus[s.KEY_CODES.DOWN]?this.player.updateDirection(new a.Vector2Normalised(c.degreesToRadians(225))):this.player.updateDirection(new a.Vector2Normalised(c.degreesToRadians(270))):this.keyStatus[s.KEY_CODES.RIGHT]?this.keyStatus[s.KEY_CODES.UP]?this.player.updateDirection(new a.Vector2Normalised(c.degreesToRadians(45))):this.keyStatus[s.KEY_CODES.DOWN]?this.player.updateDirection(new a.Vector2Normalised(c.degreesToRadians(135))):this.player.updateDirection(new a.Vector2Normalised(c.degreesToRadians(90))):this.keyStatus[s.KEY_CODES.UP]?this.player.updateDirection(new a.Vector2Normalised(c.degreesToRadians(0))):this.keyStatus[s.KEY_CODES.DOWN]?this.player.updateDirection(new a.Vector2Normalised(c.degreesToRadians(180))):this.player.remainStationary(),this.keyStatus[s.KEY_CODES.SPACE]){var t=this.player.shootAhead();t&&this.playerBullets.push(t)}this.player.update(e),this.clamp(this.player)}},{key:"ReverseEnemyDirectionIfOutOfBoundsAndDropDown",value:function(){var e=0;this.invaders.forEach(function(t){t.position.x<0?e=t.position.x:t.position.x>h.CANVAS_WIDTH-t.dimensions.width&&(e=t.position.x-(h.CANVAS_WIDTH-t.dimensions.width))}),0!==e&&this.invaders.forEach(function(t){t.position.x-=e,t.reverse(),t.position.y+=10})}},{key:"updateEnemies",value:function(e){var t=this;t.invaders=t.invaders.filter(function(e){return e.active}),t.invaders.forEach(function(t){t.update(e)}),t.ReverseEnemyDirectionIfOutOfBoundsAndDropDown(),t.invaders.forEach(function(e){Math.random()<e.probabilityOfShooting&&(t.invaderBullets=t.invaderBullets.concat(e.shootAhead()))})}},{key:"updateBullets",value:function(e){this.playerBullets=this.playerBullets.filter(function(e){return e.active}),this.playerBullets.forEach(function(t){t.update(e)}),this.invaderBullets=this.invaderBullets.filter(function(e){return e.active}),this.invaderBullets.forEach(function(t){t.update(e)})}},{key:"handleCollisions",value:function(){var e=this;e.playerBullets.forEach(function(t){e.invaders.forEach(function(e){l.rectCollides(t,e)&&(e.takeHit(t),t.active=!1)}),e.bases.forEach(function(e){e.allDestructibleScenery.forEach(function(e){l.rectCollides(t,e)&&(e.explode(),t.active=!1)})})}),e.invaderBullets.forEach(function(t){if(l.rectCollides(t,e.player)){e.player.takeDamage(t);JSON.parse(JSON.stringify(e.player.position));t.active=!1}e.bases.forEach(function(e){e.allDestructibleScenery.forEach(function(e){l.rectCollides(t,e)&&(e.explode(),t.active=!1)})})})}},{key:"gameOver",value:function(){alert("you lose!")}},{key:"clamp",value:function(e){e.position.x<0?e.position.x=0:e.position.x>h.CANVAS_WIDTH-e.dimensions.width?e.position.x=h.CANVAS_WIDTH-e.dimensions.width:e.position.y<0?e.position.y=0:e.position.y>h.CANVAS_HEIGHT-e.dimensions.height&&(e.position.y=h.CANVAS_HEIGHT-e.dimensions.height)}}]),h}();h.ASPECT_RATIO=1,h.CANVAS_WIDTH=600,h.CANVAS_HEIGHT=h.CANVAS_WIDTH/h.ASPECT_RATIO,h.gameState=r.INITIALISING,h.score=0,exports.SpaceInvaders=h;
},{"./gameObjects/Player":"9zSA","./util/Vectors":"GfMM","./constants/Keycodes":"oFXw","./constants/GameSettings":"8Aiq","./constants/GameStates":"18k3","./story/WaveManager":"uANU","./util/CollisionDetection":"MaKY","./util/Conversions":"R5Zg","./gameObjects/PlayerBase":"bV9m","./images/backgrounds/sunrise.jpg":"87MY"}],"Focm":[function(require,module,exports) {
"use strict";var e=require("./src/SpaceInvaders"),n=new e.SpaceInvaders(document.querySelector("#canvas"));function d(){requestAnimationFrame(d),n.update()}window.addEventListener("keydown",n.onKeyDown.bind(n)),window.addEventListener("keyup",n.onKeyUp.bind(n)),d();
},{"./src/SpaceInvaders":"HxjF"}]},{},["Focm"], null)
//# sourceMappingURL=/youtube-space-invaders/youtube-space-invaders.e8a4ffdb.map
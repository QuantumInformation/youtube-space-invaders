{"version":3,"sources":["webpack://SpaceInvaders/webpack/bootstrap","webpack://SpaceInvaders/./index.ts","webpack://SpaceInvaders/./src/SpaceInvaders.ts","webpack://SpaceInvaders/./src/agent/Interpreter.ts","webpack://SpaceInvaders/./src/constants/GameSettings.ts","webpack://SpaceInvaders/./src/constants/GameStates.ts","webpack://SpaceInvaders/./src/constants/KeyCodes.ts","webpack://SpaceInvaders/./src/gameObjects/AbstractInvader.ts","webpack://SpaceInvaders/./src/gameObjects/Bullets.ts","webpack://SpaceInvaders/./src/gameObjects/Invaders.ts","webpack://SpaceInvaders/./src/gameObjects/Player.ts","webpack://SpaceInvaders/./src/gameObjects/PlayerBase.ts","webpack://SpaceInvaders/./src/images/HeavyInvader.svg","webpack://SpaceInvaders/./src/images/MediumInvader.svg","webpack://SpaceInvaders/./src/images/lightInvader.svg","webpack://SpaceInvaders/./src/images/player.svg","webpack://SpaceInvaders/./src/story/WaveManager.ts","webpack://SpaceInvaders/./src/util/Canvas2D_tools.ts","webpack://SpaceInvaders/./src/util/CollisionDetection.ts","webpack://SpaceInvaders/./src/util/Conversions.ts","webpack://SpaceInvaders/./src/util/Formations.ts","webpack://SpaceInvaders/./src/util/MathChecks.ts","webpack://SpaceInvaders/./src/util/Vectors.ts"],"names":[],"mappings":"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","file":"spaceInvaders.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./index.ts\");\n","import { SpaceInvaders } from './src/SpaceInvaders'\nimport { Actions } from './src/SpaceInvaders'\n\n// this is where everything starts\nlet game = new SpaceInvaders(document.querySelector('#game-canvas'))\n\n// game.handleCollisions.bind(game)\nwindow.addEventListener('keydown', game.onKeyDown.bind(game))\nwindow.addEventListener('keyup', game.onKeyUp.bind(game))\n\ndocument.querySelector('#leftBtn').addEventListener('click', function() {\n  //const newEvent = new CustomEvent(Actions.MOVE_LEFT)\n  const newEvent = new CustomEvent(Actions.MOVE_LEFT)\n  document.body.dispatchEvent(newEvent)\n})\ndocument.querySelector('#rightBtn').addEventListener('click', function() {\n  const newEvent = new CustomEvent(Actions.MOVE_RIGHT)\n  document.body.dispatchEvent(newEvent)\n})\ndocument.querySelector('#upBtn').addEventListener('click', function() {\n  const newEvent = new CustomEvent(Actions.MOVE_UP)\n  document.body.dispatchEvent(newEvent)\n})\ndocument.querySelector('#downBtn').addEventListener('click', function() {\n  const newEvent = new CustomEvent(Actions.MOVE_DOWN)\n  document.body.dispatchEvent(newEvent)\n})\n\nfunction gameLoop() {\n  requestAnimationFrame(gameLoop)\n  // Drawing code goes here\n  game.update()\n}\n\ngameLoop()\n","import * as GameSettings from './constants/GameSettings'\nimport { BATTLE_MODE, GAME_OVER, INITIALISING, YOU_WIN } from './constants/GameStates'\nimport { KEY_CODES } from './constants/KeyCodes'\nimport { AbstractInvader } from './gameObjects/AbstractInvader'\nimport { Bullet } from './gameObjects/Bullets'\nimport { IGameObject } from './gameObjects/IGameObject'\nimport { Player } from './gameObjects/Player'\nimport { DestructibleScenery, PlayerBase } from './gameObjects/PlayerBase'\nimport { WaveManager } from './story/WaveManager'\nimport { rectCollides } from './util/CollisionDetection'\nimport { degreesToRadians } from './util/Conversions'\nimport { Vector2, Vector2Normalised } from './util/Vectors'\n\n//import sunrise from './images/backgrounds/sunrise.jpg'\n//let sunrise = require('./images/backgrounds/sunrise.jpg')\n\nimport { Interpreter } from './agent/Interpreter'\n\nexport enum Actions {\n  MOVE_UP = 'MOVE_UP',\n  MOVE_RIGHT = 'MOVE_RIGHT',\n  MOVE_DOWN = 'MOVE_DOWN',\n  MOVE_LEFT = 'MOVE_LEFT',\n  SHOOT = 'SHOOT'\n}\n\nexport class SpaceInvaders {\n  public static ASPECT_RATIO: number = 1 // keep it square for now\n  public static CANVAS_WIDTH: number = 600\n  public static CANVAS_HEIGHT: number = SpaceInvaders.CANVAS_WIDTH / SpaceInvaders.ASPECT_RATIO\n\n  static gameState = INITIALISING\n  static score: number = 0\n\n  public interpreter: Interpreter\n\n  private waveManager = new WaveManager()\n  private player: Player\n  private playerOffsetHeight: number = 20\n  private playerBullets: Bullet[] = []\n  private bases: PlayerBase[] = []\n\n  private invaders: AbstractInvader[]\n  private invaderBullets: Bullet[] = []\n\n  private canvas: HTMLCanvasElement\n\n  private context2D: CanvasRenderingContext2D\n  // private background = new Image() remove for now as ai agent needs as simple as possible\n\n  private spaceColor: string = 'black'\n\n  private keyStatus = {}\n  private ActionsOnce = {} //only runs 1 frame\n\n  private lastFrame: number = new Date().getTime()\n\n  /**\n   * Basically we figure out the best width for our canvas at start up.\n   */\n  constructor(hostElement: HTMLCanvasElement) {\n    this.canvas = hostElement\n    new Date().getTime()\n    this.context2D = this.canvas.getContext('2d')\n    this.canvas.width = SpaceInvaders.CANVAS_WIDTH\n    this.canvas.height = this.canvas.width / SpaceInvaders.ASPECT_RATIO\n    //this.background.src = sunrise\n\n    // all keys are down to start\n    for (const code in KEY_CODES) {\n      if (KEY_CODES.hasOwnProperty(code)) {\n        this.keyStatus[KEY_CODES[code]] = false\n      }\n    }\n\n    this.initGame()\n    this.setupAgent()\n    this.addExternalEvents()\n  }\n\n  public setupAgent() {\n    this.interpreter = new Interpreter()\n  }\n\n  /**\n   * This is for external egents to hook into the game to control it, instead of the default keyboard commands like up down shoot\n   */\n  private addExternalEvents() {\n    document.body.addEventListener(Actions.MOVE_LEFT, () => {\n      this.ActionsOnce[Actions.MOVE_LEFT] = true\n    })\n    document.body.addEventListener(Actions.MOVE_RIGHT, () => {\n      this.ActionsOnce[Actions.MOVE_RIGHT] = true\n    })\n    document.body.addEventListener(Actions.MOVE_UP, () => {\n      this.ActionsOnce[Actions.MOVE_UP] = true\n    })\n    document.body.addEventListener(Actions.MOVE_DOWN, () => {\n      this.ActionsOnce[Actions.MOVE_DOWN] = true\n    })\n  }\n\n  public update() {\n    const start = new Date().getTime()\n    const elapsedTime: number = start - this.lastFrame\n\n    // get the current time as seconds then multiple by the game speed to get a sensible number for multiplying velocities per frame\n    const elapsedReduced: number = (elapsedTime / 1000.0) * GameSettings.GAME_SPEED\n\n    this.drawBackground()\n\n    switch (SpaceInvaders.gameState) {\n      case INITIALISING:\n        this.drawInit()\n        return\n      case YOU_WIN:\n        this.drawYouWin()\n        return\n      case GAME_OVER:\n        this.drawGameOver()\n        return\n    }\n\n    // battle mode\n    this.updatePlayer(elapsedReduced)\n    this.updateEnemies(elapsedReduced)\n    this.updateBullets(elapsedReduced)\n    this.updateBases()\n    this.handleCollisions()\n\n    if (this.invaders.length === 0) {\n      this.invaders = this.waveManager.getNextWave()\n      if (!this.invaders) {\n        SpaceInvaders.gameState = YOU_WIN\n        return\n      }\n    }\n\n    this.drawBattleScene()\n    this.lastFrame = start\n  }\n\n  /**\n   * We want equally spaced bases  like this:\n   *\n   *\n   * |                                        |\n   * |                                        |\n   * |                                        |\n   * |                                        |\n   * |     ###           ###          ###     |\n   * |                                        |\n   * |                                        |\n   * |                                        |\n   *\n   */\n  public createBases(\n    noOfBases: number,\n    containedWithinDimensions: Vector2,\n    edgeSpace: number = 40\n  ) {\n    const bases: PlayerBase[] = [] // clear old one if there\n    for (let i = 0; i < noOfBases; i++) {\n      this.bases.push(new PlayerBase(containedWithinDimensions))\n    }\n    const freeSpace =\n      SpaceInvaders.CANVAS_WIDTH - edgeSpace * 2 - noOfBases * this.bases[0].actualDimensions.x\n    const spaceBetween = freeSpace / (noOfBases - 1)\n    // assume that all bases are same size\n    for (let i = 0; i < noOfBases; i++) {\n      const nextPos: Vector2 = new Vector2(\n        i * (this.bases[0].actualDimensions.x + spaceBetween) + edgeSpace,\n        500\n      )\n      this.bases[i].transform(nextPos)\n    }\n  }\n\n  public drawInit() {\n    this.context2D.fillStyle = '#0FF'\n    this.context2D.font = GameSettings.LARGE_FONT_SIZE + 'px Verdana'\n    this.context2D.fillText('Loading..', 5, 25)\n    SpaceInvaders.gameState = BATTLE_MODE\n  }\n\n  public drawGameOver() {\n    this.context2D.fillStyle = '#F00'\n    this.context2D.font = GameSettings.LARGE_FONT_SIZE + 'px Verdana'\n    this.context2D.fillText('SpaceInvaders over!', 5, 25)\n  }\n\n  public drawYouWin() {\n    this.context2D.fillStyle = '#FF0'\n    this.context2D.font = GameSettings.LARGE_FONT_SIZE + 'px Verdana'\n    this.context2D.fillText('YOU win!', 5, 25)\n  }\n\n  public onKeyDown(evt) {\n    this.keyStatus[evt.keyCode] = true\n  }\n\n  public onKeyUp(evt) {\n    this.keyStatus[evt.keyCode] = false\n  }\n\n  public onAction(action: string) {\n    // this.keyStatus[evt.keyCode] = false\n  }\n\n  public initGame() {\n    // bottom middle\n    this.player = new Player(\n      new Vector2(\n        SpaceInvaders.CANVAS_WIDTH / 2,\n        this.canvas.height - this.playerOffsetHeight - Player.DEFAULT_HEIGHT\n      )\n    )\n    this.invaders = this.waveManager.getNextWave()\n    this.createBases(3, new Vector2(100, 30))\n  }\n\n  /**\n   * Remove scenery that has been hit\n   */\n  public updateBases() {\n    this.bases.forEach((base: PlayerBase) => {\n      base.allDestructibleScenery = base.allDestructibleScenery.filter(particle => {\n        return particle.active\n      })\n    })\n  }\n\n  public drawBackground() {\n    this.context2D.fillStyle = this.spaceColor\n    this.context2D.fillRect(0, 0, SpaceInvaders.CANVAS_WIDTH, SpaceInvaders.CANVAS_HEIGHT)\n  }\n\n  public drawScore() {\n    this.context2D.fillStyle = '#0FF'\n    this.context2D.font = GameSettings.MEDIUM_FONT_SIZE + 'px Verdana'\n    this.context2D.fillText(`Score: ${SpaceInvaders.score}`, 2, 14)\n    this.context2D.fillText(`Health: ${this.player.health}`, 2, SpaceInvaders.CANVAS_HEIGHT - 6)\n  }\n\n  public drawBattleScene() {\n    this.drawScore()\n\n    this.invaders.forEach((thing: AbstractInvader) => {\n      thing.draw(this.context2D)\n    })\n    this.playerBullets.forEach((thing: Bullet) => {\n      thing.draw(this.context2D)\n    })\n    this.invaderBullets.forEach((thing: Bullet) => {\n      thing.draw(this.context2D)\n    })\n    this.bases.forEach((thing: PlayerBase) => {\n      thing.draw(this.context2D)\n    })\n    this.player.draw(this.context2D)\n\n    this.interpreter.readPixels()\n  }\n\n  /**\n   * listens to both manual mode and agent mode at the same time\n   * Manual commands always overwrite the agent\n   * In manual mode the app listens to keyboard presses and agent mode to actions via dom events (see index.ts)\n   * @param elapsedTime\n   */\n  public updatePlayer(elapsedTime: number) {\n    //  listen to agent events\n\n    if (this.ActionsOnce[Actions.MOVE_LEFT] === true) {\n      this.player.updateDirection(new Vector2Normalised(degreesToRadians(270)), true)\n    } else if (this.ActionsOnce[Actions.MOVE_RIGHT] === true) {\n      this.player.updateDirection(new Vector2Normalised(degreesToRadians(90)), true)\n    } else if (this.ActionsOnce[Actions.MOVE_UP] === true) {\n      this.player.updateDirection(new Vector2Normalised(degreesToRadians(0)), true)\n    } else if (this.ActionsOnce[Actions.MOVE_DOWN] === true) {\n      this.player.updateDirection(new Vector2Normalised(degreesToRadians(180)), true)\n    }\n\n    // listen to user keyboard (overrides the agent if it sets somethings)\n    if (this.keyStatus[KEY_CODES.LEFT]) {\n      if (this.keyStatus[KEY_CODES.UP]) {\n        this.player.updateDirection(new Vector2Normalised(degreesToRadians(305)))\n      } else if (this.keyStatus[KEY_CODES.DOWN]) {\n        this.player.updateDirection(new Vector2Normalised(degreesToRadians(225)))\n      } else {\n        this.player.updateDirection(new Vector2Normalised(degreesToRadians(270)))\n      }\n    } else if (this.keyStatus[KEY_CODES.RIGHT]) {\n      if (this.keyStatus[KEY_CODES.UP]) {\n        this.player.updateDirection(new Vector2Normalised(degreesToRadians(45)))\n      } else if (this.keyStatus[KEY_CODES.DOWN]) {\n        this.player.updateDirection(new Vector2Normalised(degreesToRadians(135)))\n      } else {\n        this.player.updateDirection(new Vector2Normalised(degreesToRadians(90)))\n      }\n    } else if (this.keyStatus[KEY_CODES.UP]) {\n      this.player.updateDirection(new Vector2Normalised(degreesToRadians(0)))\n    } else if (this.keyStatus[KEY_CODES.DOWN]) {\n      this.player.updateDirection(new Vector2Normalised(degreesToRadians(180)))\n    } else {\n      // this cancels the movement of any manual input if non of the flags are set, we don't do it if agent moved\n      if (\n        Object.entries(this.ActionsOnce).length === 0 &&\n        this.ActionsOnce.constructor === Object\n      ) {\n        this.player.remainStationary()\n      }\n    }\n\n    if (this.keyStatus[KEY_CODES.SPACE]) {\n      const bullet = this.player.shootAhead()\n      if (bullet) {\n        this.playerBullets.push(bullet)\n      }\n    }\n\n    /* if (this.isAgentMode) {\n       // reset states\n       this.keyStatus[KEY_CODES.LEFT] = false\n       this.keyStatus[KEY_CODES.RIGHT] = false\n       this.keyStatus[KEY_CODES.UP] = false\n       this.keyStatus[KEY_CODES.DOWN] = false\n     }*/\n\n    this.player.update(elapsedTime)\n    this.clamp(this.player)\n\n    //clear any actions\n    this.ActionsOnce = {}\n  }\n\n  public ReverseEnemyDirectionIfOutOfBoundsAndDropDown(): void {\n    let outOfBoundsBy = 0\n    this.invaders.forEach(item => {\n      if (item.position.x < 0) {\n        outOfBoundsBy = item.position.x\n        return\n      } else if (item.position.x > SpaceInvaders.CANVAS_WIDTH - item.dimensions.width) {\n        outOfBoundsBy = item.position.x - (SpaceInvaders.CANVAS_WIDTH - item.dimensions.width)\n        return\n      }\n    })\n\n    if (outOfBoundsBy === 0) {\n      return\n    }\n\n    this.invaders.forEach((enemy: AbstractInvader) => {\n      // moving to the right\n      enemy.position.x -= outOfBoundsBy\n      enemy.reverse()\n      enemy.position.y += 10\n    })\n  }\n\n  public updateEnemies(elapsedUnit: number) {\n    this.invaders = this.invaders.filter(enemy => {\n      return enemy.active\n    })\n\n    this.invaders.forEach((enemy: AbstractInvader) => {\n      enemy.update(elapsedUnit) // this might move things out of bounds so check next\n      //  self.clamp(enemy)\n    })\n\n    this.ReverseEnemyDirectionIfOutOfBoundsAndDropDown()\n    this.invaders.forEach((invader: AbstractInvader) => {\n      if (Math.random() < invader.probabilityOfShooting) {\n        this.invaderBullets = this.invaderBullets.concat(invader.shootAhead())\n      }\n    })\n  }\n\n  public updateBullets(elapsedUnit: number) {\n    this.playerBullets = this.playerBullets.filter(bullet => {\n      return bullet.active\n    })\n    this.playerBullets.forEach((bullet: Bullet) => {\n      bullet.update(elapsedUnit)\n    })\n\n    this.invaderBullets = this.invaderBullets.filter(bullet => {\n      return bullet.active\n    })\n    this.invaderBullets.forEach((bullet: Bullet) => {\n      bullet.update(elapsedUnit)\n    })\n  }\n\n  public handleCollisions() {\n    this.playerBullets.forEach((bullet: Bullet) => {\n      this.invaders.forEach((invader: AbstractInvader) => {\n        if (rectCollides(bullet, invader)) {\n          invader.takeHit(bullet)\n          bullet.active = false\n        }\n      })\n      this.bases.forEach((base: PlayerBase) => {\n        base.allDestructibleScenery.forEach((particle: DestructibleScenery) => {\n          if (rectCollides(bullet, particle)) {\n            particle.explode()\n            bullet.active = false\n          }\n        })\n      })\n    })\n\n    this.invaderBullets.forEach((bullet: Bullet) => {\n      if (rectCollides(bullet, this.player)) {\n        this.player.takeDamage(bullet)\n        const positionCopy = JSON.parse(JSON.stringify(this.player.position))\n        bullet.active = false\n      }\n      this.bases.forEach((base: PlayerBase) => {\n        base.allDestructibleScenery.forEach((particle: DestructibleScenery) => {\n          if (rectCollides(bullet, particle)) {\n            particle.explode()\n            bullet.active = false\n          }\n        })\n      })\n    })\n  }\n\n  public gameOver() {\n    alert('you lose!')\n  }\n\n  public clamp(item: IGameObject) {\n    if (item.position.x < 0) {\n      item.position.x = 0\n      return\n    } else if (item.position.x > SpaceInvaders.CANVAS_WIDTH - item.dimensions.width) {\n      item.position.x = SpaceInvaders.CANVAS_WIDTH - item.dimensions.width\n      return\n    } else if (item.position.y < 0) {\n      item.position.y = 0\n      return\n    } else if (item.position.y > SpaceInvaders.CANVAS_HEIGHT - item.dimensions.height) {\n      item.position.y = SpaceInvaders.CANVAS_HEIGHT - item.dimensions.height\n      return\n    }\n  }\n}\n","/**\n * Created by nikos on 27/07/2018.\n */\nexport class Interpreter {\n  public readPixels() {\n    const gameCanvas: HTMLCanvasElement = document.querySelector(\n      '#game-canvas'\n    ) as HTMLCanvasElement\n    const miniColourCanvas: HTMLCanvasElement = document.querySelector(\n      '#mini-colour-canvas'\n    ) as HTMLCanvasElement\n    const monoCanvas: HTMLCanvasElement = document.querySelector(\n      '#mono-canvas'\n    ) as HTMLCanvasElement\n\n    const miniColourCanvasCtx = miniColourCanvas.getContext('2d')\n    const monoCanvasCtx = monoCanvas.getContext('2d')\n\n    miniColourCanvasCtx.drawImage(gameCanvas, 0, 0, 100, 100)\n\n    // convert to black and white\n\n    const imageData = miniColourCanvasCtx.getImageData(\n      0,\n      0,\n      miniColourCanvas.width,\n      miniColourCanvas.height\n    )\n    const data = imageData.data\n\n    for (let i = 0; i < data.length; i += 4) {\n      const brightness = 0.34 * data[i] + 0.5 * data[i + 1] + 0.16 * data[i + 2]\n      // red\n      data[i] = brightness\n      // green\n      data[i + 1] = brightness\n      // blue\n      data[i + 2] = brightness\n    }\n\n    // overwrite original image\n    monoCanvasCtx.putImageData(imageData, 0, 0)\n  }\n}\n","export const GAME_SPEED: number = 50 // the higher the number the faster the game will run, all movements are effected by this number\n\nexport const VERY_SLOW_MOVEMENT_SPEED: number = 1\nexport const SLOW_MOVEMENT_SPEED: number = 2\nexport const MEDIUM_MOVEMENT_SPEED: number = 4\nexport const FAST_MOVEMENT_SPEED: number = 6\nexport const VERY_FAST_MOVEMENT_SPEED: number = 12\n\nexport const MEDIUM_FONT_SIZE: number = 14\nexport const LARGE_FONT_SIZE: number = 20\n","export const INITIALISING = 'INITIALISING'\nexport const GAME_OVER = 'GAME_OVER'\nexport const BATTLE_MODE = 'BATTLE_MODE'\nexport const YOU_WIN = 'YOU_WIN'\n","export let KEY_CODES = {\n  RETURN: 13,\n  ESC: 27,\n  SPACE: 32,\n  LEFT: 37,\n  UP: 38,\n  RIGHT: 39,\n  DOWN: 40,\n  ZERO: 48,\n  ONE: 49,\n  TWO: 50\n}\n","import { Vector2, Dimensions2, Vector2Normalised } from '../util/Vectors'\nimport { IGameObject } from './IGameObject'\nimport { Bullet, BasicBullet } from './Bullets'\nimport * as GameSettings from '../constants/GameSettings'\nimport { SpaceInvaders } from '../SpaceInvaders'\nimport { rotateAndPaintImage } from '../util/Canvas2D_tools'\n\nexport abstract class AbstractInvader implements IGameObject {\n  static DEFAULT_HEIGHT: number = 20\n  static DEFAULT_WIDTH: number = 30\n  health: number = 1\n\n  dimensions: Dimensions2 = new Dimensions2(\n    AbstractInvader.DEFAULT_WIDTH,\n    AbstractInvader.DEFAULT_HEIGHT\n  )\n\n  active: boolean = true\n  probabilityOfShooting: number = 0.0005 // on each game frame\n  rotationInDegrees: number = 180 // todo this will change\n\n  image: any = new Image()\n  BasicColor: string\n  pointsValue: number\n  protected directionVector: Vector2 = new Vector2(0, 0)\n  protected facingAngleRad: number = Math.PI // pointing down for now\n\n  constructor(public position: Vector2) {}\n\n  draw(ctx: CanvasRenderingContext2D) {\n    rotateAndPaintImage(\n      ctx,\n      this.image,\n      180,\n      this.position.x,\n      this.position.y,\n      this.dimensions.width,\n      this.dimensions.height\n    )\n  }\n\n  midpoint() {\n    return new Vector2(\n      this.position.x + this.dimensions.width / 2,\n      this.position.y + this.dimensions.height / 2\n    )\n  }\n\n  explode() {\n    this.active = false\n    SpaceInvaders.score += this.pointsValue\n    // todo boom graphic\n  }\n\n  reverse() {\n    this.directionVector.x = -this.directionVector.x\n    this.directionVector.y = -this.directionVector.y\n    // todo boom graphic\n  }\n\n  updateDirection(directionVector: Vector2Normalised) {\n    this.directionVector = directionVector\n  }\n\n  update(elapsedUnit) {\n    this.position.x += this.directionVector.x * elapsedUnit * GameSettings.VERY_SLOW_MOVEMENT_SPEED\n  }\n\n  public shootAhead(): Array<Bullet> {\n    // todo Sound.play('shoot')\n    return [new BasicBullet(this.midpoint(), new Vector2(0, 1))]\n  }\n\n  takeHit(bullet: Bullet) {\n    this.health -= bullet.damageInflicted\n    if (this.health <= 0) {\n      this.explode()\n    }\n  }\n}\n","import { SpaceInvaders } from '../SpaceInvaders'\nimport { Vector2, Dimensions2, Vector2Normalised } from '../util/Vectors'\nimport { IGameObject } from './IGameObject'\nimport * as GameSettings from '../constants/GameSettings'\n\nexport abstract class Bullet implements IGameObject {\n  static SMALL_SIZE: number = 3\n  static LARGE_SIZE: number = 9\n\n  color: any\n\n  dimensions: Dimensions2\n  damageInflicted: number\n  active: boolean = true\n  protected directionVector: Vector2Normalised\n\n  constructor(public position: Vector2, directionVector: Vector2Normalised) {\n    this.directionVector = directionVector\n  }\n\n  inBounds() {\n    return (\n      this.position.x >= 0 &&\n      this.position.x - this.dimensions.width <= SpaceInvaders.CANVAS_WIDTH &&\n      this.position.y >= 0 &&\n      this.position.y - this.dimensions.height <= SpaceInvaders.CANVAS_HEIGHT\n    )\n  }\n\n  abstract draw(canvas: CanvasRenderingContext2D)\n\n  abstract update(elapsedUnit)\n}\n\nexport class BasicBullet extends Bullet {\n  constructor(public position: Vector2, directionVector: Vector2Normalised) {\n    super(position, directionVector)\n    this.dimensions = new Dimensions2(Bullet.SMALL_SIZE, Bullet.SMALL_SIZE)\n    this.color = 'white'\n    this.damageInflicted = 1\n  }\n\n  draw(canvas: CanvasRenderingContext2D) {\n    canvas.fillStyle = this.color\n    canvas.fillRect(this.position.x, this.position.y, this.dimensions.width, this.dimensions.height)\n  }\n\n  update(elapsedUnit) {\n    this.position.x += this.directionVector.x * elapsedUnit * GameSettings.MEDIUM_MOVEMENT_SPEED\n    this.position.y += this.directionVector.y * elapsedUnit * GameSettings.MEDIUM_MOVEMENT_SPEED\n    this.active = this.active && this.inBounds()\n  }\n}\n","import { Vector2, Dimensions2, Vector2Normalised, getFanSpreadVectors } from '../util/Vectors'\nimport { Bullet, BasicBullet } from './Bullets'\nimport { AbstractInvader } from './AbstractInvader'\nimport { degreesToRadians } from '../util/Conversions'\n\nexport class LightInvader extends AbstractInvader {\n  constructor(position: Vector2 = new Vector2(0, 0)) {\n    super(position)\n    this.probabilityOfShooting = 0.001\n    this.health = 1\n    this.pointsValue = 10\n\n    this.image.src = require('../images/lightInvader.svg')\n  }\n}\n\nexport class MediumInvader extends AbstractInvader {\n  constructor(position: Vector2 = new Vector2(0, 0)) {\n    super(position)\n    this.probabilityOfShooting = 0.002\n    this.health = 3\n    this.pointsValue = 30\n\n    this.image.src = require('../images/MediumInvader.svg')\n  }\n}\nexport class HeavyInvader extends AbstractInvader {\n  constructor(position: Vector2 = new Vector2(0, 0)) {\n    super(position)\n    this.probabilityOfShooting = 0.004\n    this.pointsValue = 60\n\n    this.health = 5\n    this.image.src = require('../images/HeavyInvader.svg')\n  }\n\n  public shootAhead(): Array<Bullet> {\n    // todo Sound.play('shoot')\n\n    let self = this\n    let x = Math.random()\n\n    if (x >= 0 && x <= 0.75) {\n      return [new BasicBullet(this.midpoint(), new Vector2Normalised(0))]\n    } else {\n      let vectors = getFanSpreadVectors(10, degreesToRadians(45))\n      let bulletsToFire: Array<Bullet> = []\n      vectors.forEach(item => {\n        let b = new BasicBullet(\n          this.midpoint(),\n          new Vector2Normalised(this.facingAngleRad + item.angle())\n        )\n        bulletsToFire.push(b)\n      })\n      return bulletsToFire\n    }\n  }\n}\n","import { IGameObject } from './IGameObject'\nimport { Vector2, Dimensions2, Vector2Normalised } from '../util/Vectors'\nimport { Bullet, BasicBullet } from './Bullets'\nimport { MEDIUM_MOVEMENT_SPEED } from '../constants/GameSettings'\nimport { GAME_OVER } from '../constants/GameStates'\nimport { SpaceInvaders } from '../SpaceInvaders'\n\nexport class Player implements IGameObject {\n  static DEFAULT_HEIGHT: number = 30\n  static DEFAULT_WIDTH: number = 60\n  color: string = '#0FF'\n  position: Vector2\n\n  dimensions: Dimensions2 = new Dimensions2(Player.DEFAULT_WIDTH, Player.DEFAULT_HEIGHT)\n  health: number = 3\n\n  lastShotTime: number = 0\n  fireRatePerSec = 4\n\n  lastCommandWasAgentEvent = false\n\n  private directionVector: Vector2 = new Vector2(0, 0)\n\n  constructor(position) {\n    this.position = position\n  }\n\n  draw(context2D: CanvasRenderingContext2D) {\n    context2D.drawImage(img, this.position.x, this.position.y)\n  }\n\n  update(elapsedUnit) {\n    this.position.x += this.directionVector.x * elapsedUnit * MEDIUM_MOVEMENT_SPEED\n    this.position.y += this.directionVector.y * elapsedUnit * MEDIUM_MOVEMENT_SPEED\n    if(this.lastCommandWasAgentEvent){ // agent decides one frame at a time\n      this.remainStationary()\n    }\n  }\n\n  midpoint() {\n    return new Vector2(\n      this.position.x + this.dimensions.width / 2,\n      this.position.y + this.dimensions.height / 2\n    )\n  }\n\n  explode() {\n    SpaceInvaders.gameState = GAME_OVER\n    let myAudio = document.createElement('audio')\n\n    // todo\n    // myAudio.src = require('file?name=playerExplosion.mp3!../audio/playerExplosion.mp3')\n    // myAudio.play()\n  }\n\n  shootAhead(): Bullet {\n    // todo Sound.play('shoot')\n    let timeDifference = new Date().getTime() - this.lastShotTime\n    if (timeDifference > 1000 / this.fireRatePerSec) {\n      this.lastShotTime = new Date().getTime()\n      return new BasicBullet(this.midpoint(), new Vector2Normalised(0))\n    } else {\n      return null\n    }\n  }\n\n  /**\n   *\n   * @param directionVector\n   * @param lastCommandWasAgentEvent if this is set then we revert the ship to remain stationary after one update loop, unless manual overide\n   */\n  updateDirection(directionVector: Vector2Normalised, lastCommandWasAgentEvent = false) {\n    this.directionVector = directionVector\n    this.lastCommandWasAgentEvent = lastCommandWasAgentEvent\n  }\n\n  remainStationary() {\n    this.directionVector.x = 0\n    this.directionVector.y = 0\n  }\n\n  takeDamage(bullet: Bullet) {\n    this.health -= bullet.damageInflicted\n    if (this.health <= 0) {\n      this.explode()\n    }\n  }\n}\n\nlet img = new Image()\nimg.src = require('../images/player.svg')\n","import { IGameObject } from './IGameObject'\nimport { Vector2, Dimensions2 } from '../util/Vectors'\n\nexport class DestructibleScenery implements IGameObject {\n  static DEFAULT_SIZE: number = 5\n  position: Vector2\n  dimensions: Dimensions2 = new Dimensions2(\n    DestructibleScenery.DEFAULT_SIZE,\n    DestructibleScenery.DEFAULT_SIZE\n  )\n  color: string = '#0F9'\n  active: boolean = true\n\n  constructor(position) {\n    this.position = position\n  }\n\n  draw(canvas: CanvasRenderingContext2D) {\n    canvas.fillStyle = this.color\n    if (this.active) {\n      canvas.fillRect(\n        this.position.x,\n        this.position.y,\n        this.dimensions.width,\n        this.dimensions.height\n      )\n    }\n  }\n\n  // tslint:disable-next-line\n  update(elapsedUnit) {}\n\n  explode() {\n    this.active = false\n    // todo boom graphic\n  }\n}\n\n/**\n * The classic Green protective bases the player can hide behind\n */\nexport class PlayerBase {\n  allDestructibleScenery: DestructibleScenery[] = []\n  actualDimensions: Vector2\n\n  constructor(public requestedDimensions: Vector2) {\n    let numberPerRow = Math.floor(requestedDimensions.x / DestructibleScenery.DEFAULT_SIZE)\n    let numberPerColumn = Math.floor(requestedDimensions.y / DestructibleScenery.DEFAULT_SIZE)\n\n    this.actualDimensions = new Vector2(\n      numberPerRow * DestructibleScenery.DEFAULT_SIZE,\n      numberPerColumn * DestructibleScenery.DEFAULT_SIZE\n    )\n\n    let nextPosition\n    // just rectangular bases to start with\n    // todo mask values to give shapes like the original space invaders bases\n    for (let i = 0; i < numberPerRow; i++) {\n      nextPosition = new Vector2(DestructibleScenery.DEFAULT_SIZE * i, 0)\n      for (let j = 0; j < numberPerColumn; j++) {\n        nextPosition = nextPosition.addTwo(0, DestructibleScenery.DEFAULT_SIZE)\n        this.allDestructibleScenery.push(new DestructibleScenery(nextPosition))\n      }\n    }\n  }\n\n  draw(canvas: CanvasRenderingContext2D) {\n    this.allDestructibleScenery.forEach((item: DestructibleScenery) => {\n      item.draw(canvas)\n    })\n  }\n\n  transform(position: Vector2) {\n    this.allDestructibleScenery.forEach(function(item: DestructibleScenery) {\n      item.position = item.position.add(position)\n    })\n  }\n}\n","module.exports = __webpack_public_path__ + \"a29b209e4cde9ca981b0547df3cd01fd.svg\";","module.exports = __webpack_public_path__ + \"b000f6c649a9a520d4b9d77037409c1c.svg\";","module.exports = __webpack_public_path__ + \"96b72f265559529badb309b9e9b1fdf3.svg\";","module.exports = __webpack_public_path__ + \"421aea6e4c14536bacb0c89586f61154.svg\";","import { LightInvader, MediumInvader, HeavyInvader } from '../gameObjects/Invaders'\nimport { Vector2, Vector2Normalised } from '../util/Vectors'\nimport { AbstractInvader } from '../gameObjects/AbstractInvader'\nimport { triangle, rectangle } from '../util/Formations'\n\nexport class WaveManager {\n  waves: Array<() => Array<AbstractInvader>> = []\n  currentWave = 0\n\n  constructor () {\n    this.generateWaves()\n  }\n\n  public getNextWave (): Array<AbstractInvader> {\n    let nextWave = this.waves[this.currentWave]\n    if (nextWave) {\n      this.currentWave++\n      return nextWave()\n    }\n    return null\n  }\n\n  private generateWaves () {\n\n    let horizontalGap = 15\n    let verticalGap = 20\n    let initialXOffset = 20\n    let initialYOffset = 20\n\n    this.waves.push(function () {\n\n      let units: Array<AbstractInvader> = [\n        new LightInvader(), new LightInvader(), new LightInvader(), new LightInvader(),\n        new LightInvader(), new LightInvader(), new LightInvader(), new LightInvader()\n      ]\n      units.forEach(unit => {\n        unit.updateDirection(new Vector2Normalised(90))\n      })\n      rectangle(units, 4, horizontalGap, verticalGap)\n      return units\n    })\n    this.waves.push(function () {\n\n      let units: Array<AbstractInvader> = [\n        new LightInvader(), new LightInvader(), new LightInvader(), new MediumInvader(), new MediumInvader(), new LightInvader(), new LightInvader(), new LightInvader(),\n        new LightInvader(), new LightInvader(), new LightInvader(), new LightInvader(), new LightInvader(), new LightInvader(), new LightInvader(), new LightInvader()\n      ]\n      units.forEach(unit => {\n        unit.updateDirection(new Vector2Normalised(90))\n      })\n      rectangle(units, 8, horizontalGap, verticalGap)\n      return units\n    })\n\n    this.waves.push(function () {\n      let units: Array<AbstractInvader> = [\n        new LightInvader(), new MediumInvader(), new HeavyInvader(), new MediumInvader(), new LightInvader(),\n        new MediumInvader(), new MediumInvader(), new MediumInvader(),\n        new LightInvader()\n      ]\n      units.forEach(unit => {\n        unit.updateDirection(new Vector2Normalised(90))\n      })\n      triangle(units, horizontalGap, verticalGap)\n      return units\n    })\n    this.waves.push(function () {\n      let units: Array<AbstractInvader> = [\n        new LightInvader(), new MediumInvader(), new HeavyInvader(), new HeavyInvader(), new HeavyInvader(), new MediumInvader(), new LightInvader(),\n        new LightInvader(), new MediumInvader(), new HeavyInvader(), new MediumInvader(), new LightInvader(),\n        new LightInvader(), new MediumInvader(), new LightInvader(),\n        new LightInvader()\n      ]\n      units.forEach(unit => {\n        unit.updateDirection(new Vector2Normalised(90))\n      })\n      triangle(units, horizontalGap, verticalGap)\n      return units\n    })\n  }\n}\n","import * as GameMath from './Vectors'\n\nexport function rotateAndPaintImage(\n  context,\n  image,\n  angleInDegrees,\n  positionX,\n  positionY,\n  axisX,\n  axisY\n) {\n  let angleInRadians = GameMath.degreesToRadians(angleInDegrees)\n  context.translate(positionX, positionY)\n  context.rotate(angleInRadians)\n  context.drawImage(image, -axisX, -axisY)\n  context.rotate(-angleInRadians)\n  context.translate(-positionX, -positionY)\n}\n","import { IGameObject } from '../gameObjects/IGameObject'\n\nexport function rectCollides(a: IGameObject, b: IGameObject) {\n  return (\n    a.position.x < b.position.x + b.dimensions.width &&\n    a.position.x + a.dimensions.width > b.position.x &&\n    a.position.y < b.position.y + b.dimensions.height &&\n    a.position.y + a.dimensions.height > b.position.y\n  )\n}\n","export function degreesToRadians(degrees: number): number {\n  return (degrees / 360) * 2 * Math.PI\n}\n\nexport function radiansToDegress(radians: number): number {\n  return (radians * 360) / (2 * Math.PI)\n}\n","import { IGameObject } from '../gameObjects/IGameObject'\nimport { isSquare } from './MathChecks'\nimport { Vector2 } from './Vectors'\n\n/**\n * modifys an array of objects so their position is in a triangle\n *\n * let row number = n\n * each row contains (n*2)-1\n *\n * total rows = n^2\n * must be a perfect square of units\n * we render each unit from the bottom left\n *\n * looks like:\n *     1\n *    111\n *   11111\n *  1111111\n *\n * @param gameObjects\n */\nexport function triangle(\n  gameObjects: Array<IGameObject>,\n  horizontalGap: number,\n  verticalGap: number\n): void {\n  if (!isSquare(gameObjects.length)) {\n    throw new Error('needs perfect square number of units')\n  }\n  let numberOfRows = Math.sqrt(gameObjects.length)\n\n  let nextRowOffset = new Vector2(0, 0)\n  let thisRowStartingIndex = 0\n\n  for (let i = numberOfRows; i >= 1; i--) {\n    let numberOnThisRow = i * 2 - 1\n    let maxHeight: number = 0\n    for (let j = 0; j < numberOnThisRow; j++) {\n      let go = gameObjects[thisRowStartingIndex + j]\n      if (go.dimensions.height > maxHeight) {\n        maxHeight = go.dimensions.height\n      }\n      go.position = new Vector2(\n        j * (go.dimensions.width + horizontalGap) + nextRowOffset.x,\n        nextRowOffset.y\n      )\n    }\n\n    nextRowOffset = nextRowOffset.addTwo(\n      gameObjects[thisRowStartingIndex].dimensions.width + horizontalGap,\n      maxHeight + verticalGap\n    )\n    thisRowStartingIndex = thisRowStartingIndex + numberOnThisRow\n  }\n}\n\nexport function rectangle(\n  gameObjects: Array<IGameObject>,\n  itemsPerRow,\n  horizontalGap: number,\n  verticalGap: number\n): void {\n  let numberOfRows = gameObjects.length / itemsPerRow\n\n  if (numberOfRows % 1 !== 0) {\n    throw new Error('number / itemsPerRow must fit')\n  }\n\n  let nextRowOffset = new Vector2(0, 0)\n  let thisRowStartingIndex = 0\n\n  for (let i = 0; i < numberOfRows; i++) {\n    let maxHeight: number = 0\n    for (let j = 0; j < itemsPerRow; j++) {\n      let go = gameObjects[thisRowStartingIndex + j]\n      if (go.dimensions.height > maxHeight) {\n        maxHeight = go.dimensions.height\n      }\n      go.position = new Vector2(\n        j * (go.dimensions.width + horizontalGap) + nextRowOffset.x,\n        nextRowOffset.y\n      )\n    }\n\n    nextRowOffset = nextRowOffset.addTwo(0, maxHeight + verticalGap)\n    thisRowStartingIndex = thisRowStartingIndex + itemsPerRow\n  }\n}\n","export function isSquare(n) {\n  return n > 0 && Math.sqrt(n) % 1 === 0\n}\n","export class Dimensions2 {\n  constructor(public width: number, public height: number) {}\n}\n\nexport class Vector2 {\n  constructor(public x: number, public y: number) {}\n\n  public add(otherVector: Vector2): Vector2 {\n    return new Vector2(this.x + otherVector.x, this.y + otherVector.y)\n  }\n\n  public addTwo(x: number, y: number): Vector2 {\n    return new Vector2(this.x + x, this.y + y)\n  }\n\n  public reverse(): Vector2 {\n    return new Vector2(-this.x, -this.y)\n  }\n\n  public magnitude(): number {\n    return Math.sqrt(this.x ** 2 + this.y ** 2)\n  }\n\n  public angle(): number {\n    return Math.atan2(this.y, this.x) - degreesToRadians(-90)\n  }\n\n  /**\n   * returns a new vector based on the current one rotated by an angle\n   * @param initialVector\n   * @param rotatingDegrees\n   * @returns {Vector2}\n   */\n  public rotateBy(radians: number): Vector2 {\n    let newAngleRads = Math.atan2(this.x, this.y) + radians\n    let mag = this.magnitude()\n    return new Vector2(mag * Math.sin(newAngleRads), mag * Math.cos(newAngleRads))\n  }\n}\n\nexport class Vector2Normalised extends Vector2 {\n  constructor(radians: number) {\n    super(Math.sin(radians), -Math.cos(radians))\n  }\n}\n\nexport function degreesToRadians(degrees: number): number {\n  return (degrees / 360) * 2 * Math.PI\n}\n\nexport function radiansToDegress(radians: number): number {\n  return (radians * 360) / (2 * Math.PI)\n}\n\n/**\n * Returns array of vectors equally spaced measured from both sidesfor the x origin in normal maths xy chart\n * the shooter will then modify based on its rotation of the firing gun\n */\nexport function getFanSpreadVectors(\n  numberOfBullets: number,\n  spreadAngleRadians: number\n): Array<Vector2Normalised> {\n  let arr: Array<Vector2Normalised> = []\n  let angleGap: number = spreadAngleRadians / numberOfBullets\n  let startingAngle: number = spreadAngleRadians / 2\n  for (let i = 0; i < numberOfBullets; i++) {\n    let nextAngle = startingAngle - i * angleGap\n    arr.push(new Vector2Normalised(nextAngle))\n  }\n  return arr\n}\n"],"sourceRoot":""}